# Deployment-Tech
link http://www.yunweipai.com/archives/11991.html

<h3>蓝绿部署</h3>

* 蓝绿部署在考虑到两个环境的在线服务随版本切换的特征，版本一致性和数据的一致性保证非常重要。
* 另外，在非隔离基础架构（VM、Docker等）上蓝绿部署有一定毁灭性风险，不是高手要慎用。


<h3>滚动部署</h3>

* 相对小众的市场，一般是取出一个或者多个服务器停止服务，执行更新，并重新将其投入使用。周而复始，直到集群中所有的实例都更新成新版本。<br>
* 之所以小众，看缺点：<br>
    1. 没有一个环境确定ok，因为直接改了现有环境；<br>
    2. 既然没有环境确定ok，如果滚动发布到了第90个实例，需要回滚……程序猿可能会摔键盘；<br>
    3. 万一部署期间系统自动做了动态伸缩，不好判断哪个节点用了哪个代码。此时一款强大的自动化运维工具就派上用场了，but，有些运维部门没有呢；<br>
    
<h3>灰度发布／金丝雀发布</h3>
“金丝雀部署”，在业界有两种策略形式：

    1. 一种是部分服务器升级到新的版本。这种形式的重点在于，接入网关要精确的匹配某个特征的用户（灰度）流量导入到这批新版本集群中；
    2. 另外一种是所有服务器升级新的版本。这种形式的重点在于，接入网关要精确的匹配某个特征的用户（灰度）流量使用到新接口；
    
<h3>AB测试</h3>
很多行业都有A/B测试的概念，A/B测试更像是用户侧的新旧版本机制，通过灰度一部分试验客户，使用A/B不同的效果，达到验证不同版本在可用性、受欢迎程度、可见性等等实际表现上的对比。
A/B测试是推广到全部流量可信新版前的科学验证方式，facebook改版就用过这个方式；蓝绿部署是直接发布到可信新版。
